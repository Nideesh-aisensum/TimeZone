<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timezone - Enjoy!</title>
    <link rel="stylesheet" href="style.css">

    <style>
        /* Fixed for 1080x1920 resolution - NO SCROLLING */
        html,
        body {
            overflow: hidden;
        }

        .container {
            width: 1080px;
            height: 1920px;
            overflow: hidden;
        }

        .content {
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            overflow: hidden;
            height: 100%;
            width: 100%;
            padding-top: 60px;
        }

        /* Branding Logo */
        .branding-section {
            margin-bottom: 30px;
        }

        .branding-logo {
            width: 250px;
            height: auto;
            margin-bottom: 30px;
        }

        .timezone-branding {
            width: 300px;
            height: auto;
            margin-bottom: -55px;
            margin-top: 160px;
        }

        /* Header Section */
        .header-section {
            text-align: center;
            margin-bottom: 0px;
        }

        .header-title {
            font-family: 'Nulshock', sans-serif;
            font-size: 100px;
            background: linear-gradient(180deg, #ffffff 0%, #ffffff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.5)) drop-shadow(0 6px 10px rgba(255, 255, 255, 0.5));
            letter-spacing: 5px;
            line-height: 1.1;
        }

        /* Cat Character Section */
        .cat-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
        }


        /* Banner Section */
        .banner-section {
            margin-top: 70px;
            margin-bottom: 90px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .banner-bg {
            width: 900px;
            height: auto;
            object-fit: contain;
        }

        .banner-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            font-family: 'Nulshock', sans-serif;
            font-size: 24px;
            color: #ffffff;
            letter-spacing: 2px;
            line-height: 1.5;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            width: 80%;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Video Background -->
        <video class="video-bg" autoplay loop muted playsinline>
            <source src="other-bg.mp4" type="video/mp4">
        </video>
        <!-- Home Button -->
        <img src="home.png" alt="Home" class="editable added-element" data-id="home-button" onclick="goHome()"
            style="max-width: 200px; height: auto; position: absolute; top: 31px; right: 30px; z-index: 50; cursor: pointer;">

        <div class="content">
            <!-- Timezone Branding -->
            <div class="branding-section editable" data-id="branding-section">
                <img src="timezone-branding.png" alt="Timezone Logo" class="logo timezone-branding editable"
                    data-id="logo">
            </div>


            <!-- Header Section -->
            <div class="header-section editable" data-id="header-section">
                <h1 id="header-title" class="header-title">SELAMAT<br>BERMAIN!</h1>
            </div>

            <!-- Banner -->
            <div class="banner-section editable" data-id="banner-section">
                <img src="blue-banner.png" alt="Banner" class="banner-bg">
                <p id="banner-text" class="banner-text">TUNJUKKAN BUKTI CETAK INI KE KASIR UNTUK MENYELESAIKAN
                    PEMBAYARAN</p>
            </div>

            <!-- Cat Character -->
            <div class="character-wrapper editable" data-id="character"
                style="transform: translate(0px, -40px) scale(2.5);">
                <img src="cat-character.gif" alt="Cat Character" class="character">
            </div>
        </div>

    </div>
    </div>

    <script src="shell-connector.js"></script>
    <script src="session-manager.js"></script>
    <script src="language.js"></script>
    <script src="dashboard-api.js"></script>

    <script>
        // Send session complete to dashboard
        const sessionData = getSession();
        console.log('ðŸ“Š Session data for dashboard:', sessionData);

        if (window.Dashboard) {
            window.Dashboard.sendSessionComplete({
                isNewUser: sessionData?.isNewPlayer || false,
                cardType: sessionData?.selectedCard || 'unknown',
                amount: sessionData?.finalPayment || sessionData?.totalCost || 0,
                offerId: sessionData?.selectedOffer,
                offerType: sessionData?.selectedOffer ? 'fixed_offer' : 'custom_topup',
                offerCost: sessionData?.offerCost,
                bonusPercent: 0,
                oodAccepted: sessionData?.oodAccepted || false,
                oohAccepted: sessionData?.oohAccepted || false,
                snacksAccepted: sessionData?.snacksAccepted || false,
                scratchCardAccepted: sessionData?.scratchCardAccepted || false
            });
        }
    </script>

    <script>
        // Set current page in session - this is the final page
        setCurrentPage('enjoy');

        const translations = {
            en: {
                headerTitle: "ENJOY<br>PLAYING!",
                bannerText: "SHOW THIS PRINT OUT TO THE CASHIER TO COMPLETE YOUR PAYMENT",
                langLabel: "English"
            },
            id: {
                headerTitle: "SELAMAT<br>BERMAIN!",
                bannerText: "TUNJUKKAN BUKTI CETAK INI KE KASIR UNTUK MENYELESAIKAN PEMBAYARAN",
                langLabel: "Bahasa"
            }
        };

        let currentLang = getCurrentLanguage();

        function toggleLanguage() {
            const dropdown = document.getElementById('lang-dropdown');
            dropdown.classList.toggle('hidden');
        }

        function applyLanguage(lang) {
            currentLang = lang;
            const data = translations[lang];

            document.getElementById('header-title').innerHTML = data.headerTitle;
            document.getElementById('banner-text').textContent = data.bannerText;
            const langEl = document.getElementById('current-lang');
            if (langEl) langEl.textContent = data.langLabel;
        }

        function setLanguage(lang) {
            saveLanguage(lang);
            applyLanguage(lang);
            document.getElementById('lang-dropdown').classList.add('hidden');
        }

        // Close dropdown
        window.onclick = function (event) {
            if (!event.target.matches('#lang-btn') && !event.target.closest('#lang-btn')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (!openDropdown.classList.contains('hidden')) {
                        openDropdown.classList.add('hidden');
                    }
                }
            }
        }

        // Apply language immediately to prevent flash (before waiting for all resources)
        applyLanguage(currentLang);

        // Initialize other features after all resources load
        window.onload = function () {
            if (typeof initEditMode === 'function') {

            }

            // Auto-start screensaver after showing the thank-you screen for 5 seconds
            setTimeout(function () {
                window.location.href = 'screensaver.html';
            }, 5000);
        };
    </script>


</body>

</html>